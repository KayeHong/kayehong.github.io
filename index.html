<!--
import android.Manifest
import android.app.WallpaperManager
import android.content.Context
import android.graphics.drawable.Drawable
import android.os.Build
import androidx.activity.compose.rememberLauncherForActivityResult
import androidx.activity.result.contract.ActivityResultContracts
import androidx.compose.foundation.background
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.asImageBitmap
import androidx.compose.ui.graphics.painter.BitmapPainter
import androidx.compose.ui.graphics.painter.ColorPainter
import androidx.core.content.ContextCompat
import androidx.core.graphics.drawable.toBitmap

@Composable
fun WallpaperBackground(context: Context) {
    val wallpaperManager = remember { WallpaperManager.getInstance(context) }

    // State to hold permission and drawable
    var wallpaperDrawable by remember { mutableStateOf<Drawable?>(null) }

    // Permission launcher
    val permissionLauncher = rememberLauncherForActivityResult(
        ActivityResultContracts.RequestPermission()
    ) { isGranted ->
        if (isGranted) {
            wallpaperDrawable = wallpaperManager.drawable
        }
    }

    // Check and request permission on launch
    LaunchedEffect(Unit) {
        if (hasReadExternalStoragePermission(context)) {
            wallpaperDrawable = wallpaperManager.drawable
        } else {
            permissionLauncher.launch(Manifest.permission.READ_EXTERNAL_STORAGE)
        }
    }

    // Render UI with wallpaper or fallback color
    Box(
        modifier = Modifier
            .fillMaxSize()
            .background(
                wallpaperDrawable?.toBitmap()?.asImageBitmap()?.let { BitmapPainter(it) }
                    ?: ColorPainter(Color.Red)
            )
    )
}

// Helper function to check permission
private fun hasReadExternalStoragePermission(context: Context): Boolean =
    ContextCompat.checkSelfPermission(
        context,
        Manifest.permission.READ_EXTERNAL_STORAGE
    ) == android.content.pm.PackageManager.PERMISSION_GRANTED

-->