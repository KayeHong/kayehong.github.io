<!--
import android.Manifest
import android.app.WallpaperManager
import android.content.Context
import android.graphics.drawable.Drawable
import android.os.Build
import androidx.activity.compose.rememberLauncherForActivityResult
import androidx.activity.result.contract.ActivityResultContracts
import androidx.compose.foundation.Canvas
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.runtime.*
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.ImageBitmap
import androidx.compose.ui.graphics.asImageBitmap
import androidx.compose.ui.graphics.drawscope.drawImage
import androidx.core.content.ContextCompat
import androidx.core.graphics.drawable.toBitmap

@Composable
fun WallpaperBackground(context: Context) {
    val wallpaperManager = remember { WallpaperManager.getInstance(context) }

    // State to hold wallpaper and permission status
    var wallpaperImage by remember { mutableStateOf<ImageBitmap?>(null) }

    // Permission launcher
    val permissionLauncher = rememberLauncherForActivityResult(
        ActivityResultContracts.RequestPermission()
    ) { isGranted ->
        if (isGranted) {
            wallpaperImage = wallpaperManager.drawable?.toBitmap()?.asImageBitmap()
        }
    }

    // Check and request permission on launch
    LaunchedEffect(Unit) {
        if (hasReadExternalStoragePermission(context)) {
            wallpaperImage = wallpaperManager.drawable?.toBitmap()?.asImageBitmap()
        } else {
            permissionLauncher.launch(Manifest.permission.READ_EXTERNAL_STORAGE)
        }
    }

    // Render the background
    Box(modifier = Modifier.fillMaxSize()) {
        Canvas(modifier = Modifier.fillMaxSize()) {
            wallpaperImage?.let {
                drawImage(it)
            } ?: drawRect(Color.Red) // Draw red background if no wallpaper
        }
    }
}

// Helper function to check permission
private fun hasReadExternalStoragePermission(context: Context): Boolean =
    ContextCompat.checkSelfPermission(
        context,
        Manifest.permission.READ_EXTERNAL_STORAGE
    ) == android.content.pm.PackageManager.PERMISSION_GRANTED

   
-->